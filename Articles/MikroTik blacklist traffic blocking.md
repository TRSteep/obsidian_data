#mikrotik #security 

- https://marvins.ru/administrirovanie/mikrotik-blokirovka-trafika-po-chernomu-spisku.html
- Списки
	- blocklist.de
	- spamhaus.org

скрипт формирования списков для Mikrotik
```bash
vi /home/admins/scripts/mikrotik_bl.sh

#!/bin/sh
#Выходная директория, у вас она будет другой!
outputdir=/var/www/marvins.ru/mikrotik_bl

tempdir=/tmp
datenow=$(date);

echo "# Generated by Vladimir marvins.ru on $datenow" > $tempdir/blocklist_de.rsc
echo "/ip firewall address-list" >> $tempdir/blocklist_de.rsc
echo "remove [find where list=blocklist.de]" >> $tempdir/blocklist_de.rsc
wget -q -O - https://lists.blocklist.de/lists/all.txt| grep -v ":" | awk '{ print "add list=blocklist.de address="$1"";}' >> $tempdir/blocklist_de.rsc
echo "/log info \"List create: $datenow\"" >> $tempdir/blocklist_de.rsc
mv $tempdir/blocklist_de.rsc $outputdir/blocklist_de.rsc

echo "# Generated by Vladimir marvins.ru on $datenow" > $tempdir/spamhaus.rsc
echo "/ip firewall address-list" >> $tempdir/spamhaus.rsc
echo "remove [find where list=spamhaus]" >> $tempdir/spamhaus.rsc
wget -q -O - http://www.spamhaus.org/drop/drop.lasso | awk --posix '/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\// { print "add list=spamhaus address="$1"";}' >> $tempdir/spamhaus.rsc
echo "/log info \"List create: $datenow\"" >> $tempdir/spamhaus.rsc
mv $tempdir/spamhaus.rsc $outputdir/spamhaus.rsc
```

- Делаем скрипт исполняемым:
	- `chmod +x /home/admins/scripts/mikrotik_bl.sh`

Получаем файлы:
- blocklist_de.rsc
- spamhaus.rsc

Настройка расписания
 - `sudo crontab -e`
 - `5       */12     *       *       *               /home/admins/scripts/mikrotik_bl.sh >/dev/null 2>&1`