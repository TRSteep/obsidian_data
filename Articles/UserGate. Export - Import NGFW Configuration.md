#usergate

все настройки можно экспортировать в читабельном виде (json) с помощью скрипта
https://github.com/usergate/Migrations/tree/main/ug_convert_config

- Открыть веб-консоль администратора таким образом: https://<usergate_ip>:8001/?features=zone-xml-rpc
- В настройках нужной зоны активировать сервис "XML-RPC для управления".
- Скачать архив ug_convert_config.zip
	- `wget https://github.com/usergate/Migrations/blob/main/ug_convert_config/ug_convert_config.zip`
- Разархивирование
	- `unzip ug_convert_config.zip`
	- `chmod +X ug_convert_config`
	- Создать в текущей директории каталог data
		- `mkdir data`
- Запуск
	- `sudo ./ug_convert_config`
	- При запуске программа запрашивает
		- ip узла
		- login
		- пароль администратора NGFW
		- Проверьте, что у администратора, логин которого используете, в профиле включены разрешения для API
	- Export
		- Выбрать пункт 1 - **Экспорт конфигурации**
			- В каталоге data будут созданы файлы json с текущей конфигурацией.
	- Import
		- Перед началом работы на новой версии NGFW UserGate настроить DNS, интерфейс Untrusted (для выхода в интернет), шлюз, произвести активацию корректным ПИН-кодом. После этого дождаться обновления библиотек и списков
		- Выбрать пункт 2 - **Импорт конфигурации**
		- Если у Вас используются сервера аутентификации (LDAP, NTLM, RADIUS, TACACS, SAML), то необходимо в первую очередь импортировать настройки DNS, затем используемые сервера аутентификации и профили аутентификации. После этого ввести пароль в серверах аутентификации, загрузить keytab-файл, если используется авторизация kerberos и проверить работу данных серверов аутентификации. Затем можно выбрать **"Импортировать всё"**.
			- Конфигурация из каталога data будет импортирована на NGFW.
		- После импорта проверьте вывод программы на наличие сообщений, выделенных цветом. Исправьте конфигурацию UTM в соответствие с рекомендациями.
- tips
	- Никакие пароли (локальных пользователей, PPPoE, VPN, серверов аутентификации и т.д.) не переносятся. Необходимо заново вручную ввести пароль. Это ограничение API - невозможно выгрузить парольную информацию.
	- Имена групп, серверов аутентификации, различных профилей, правил, всех списков библиотеки и всего-всего должны быть ТОЛЬКО в английском регистре. Русские буквы допустимы только в описании. Перед экспортом, замените русские символы в именах на английские.
	- При импорте интерфейсов им прописываются IP-адреса из сохранённой конфигурации. Необходимо проследить, чтобы не было конфликта IP-адресов. В общем случае можно в файле выгруженной конфигурации data/Network/Interfaces/config_interfaces.json поменять ip-адрес на каждом интерфейсе.
	- Сертификаты не переносятся. Если используется сертификат по умолчанию для SSL инспектирования (CA Default), то необходимо обновить его у всех пользователей. Если вы используете собственные сертификаты, необходимо загрузить и сконфигурировать их заново.
	- Правила экспорта настроек на сервера FTP, SSH не переносятся. Это надо сделать руками.