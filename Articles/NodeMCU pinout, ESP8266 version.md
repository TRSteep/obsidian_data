#esp #diy 

[ESP32 pin](ESP32%20pin.md)

# ESP8266
- ![5accb91b61abc5466dc3167b4b2af892.png](file:///C:/Users/trsteep/.config/joplin-desktop/resources/d295f86e5f1440168593ae121da32981.png)
- GND — общий провод, "земля"
- Выводы питания
    - Vin — вывод для подключения внешнего источника питания 5V. Стабилизатор AMS1117-3.3 позволяет подавать питание на Vin в широком диапазоне от 5 до 10 V. Хотя стабилизатор допускает подачу более высокого напряжения (до 15 V), но без дополнительного охлаждения может возникать перегрев чипа.
    - 3V — контакт, на который подается выходное напряжение внутрисхемного стабилизатора 3.3V. Может быть использован для питания подключаемых к плате датчиков. Суммарная максимальная нагрузка всех выводов 3.3V не должна превышать 300мА.
    - VU — V USB вывод, на который заведено напряжение 5V с USB-разъема.
- Выводы GPIO
    - GPIO (General Purpose Interput Output) — контакты ввода/вывода общего назначения. Могут быть сконфигурированы как входы или выходы и программно назначены на различные функции.
        - D0 - GPIO16 - Wake
        - D1 - GPIO5 - **SCL**
        - D2 - GPIO4 - **SDA**
        - D3 - GPIO0 - Flash
        - D4 - GPIO2 - TXD1
        - D5 - GPIO14 - HSCLK
        - D6 - GPIO12 - HMISO
        - D7 - GPIO13 - HMISI
        - D8 - GPIO15 - HCS
- Выводы управления
    - RST (Reset) — вывод используется для сброса микроконтроллера ESP8266.
    - EN (Chip Enable) — при подаче на контакт сигнала высокого уровня, микроконтроллер ESP8266 переходит в рабочий режим, при сигнале низкого уровня — в режим энергосбережения.
    - WAKE — контакт используется для пробуждения чипа ESP8266 из режима глубокого сна (deep-sleep mode).
- АЦП (ADC)
    - ADC0 / TOUT — вывод встроенного 10-разрядного аналого-цифрового преобразователя (АЦП). Преобразованные значения лежат в интервале 0-1023. Платы разработки NodeMCU V2 и V3 поставляются с внутренним делителем напряжения, поэтому входной диапазон составляет от 0 до 3,3 В. Диапазон входного напряжения для АЦП в кристалле ESP8266: 0 — 1 В.
- UART
    - UART (Universal Asynchronous Receiver-Transmitter) — асинхронный последовательный интерфейс устанавливает связь с другими устройствами по шине UART. У контроллера ESP8266 два модуля UART. Максимальная скорость передачи данных, заявленная производителем, 4,5 Mbps.
- SPI
    - SPI (Serial Peripheral Interface) — последовательный периферийный интерфейс. NodeMCU имеет два SPI (SPI и HSPI) в ведущем и подчиненном режимах.
- SDIO
    - SDIO — интерфейс безопасных цифровых входов/выходов, предназначен для коммутации с внешней флэш-памятью стандарта SD по последовательной шине.
- FLASH
    - Кнопка Flash на NodeMCU подключает к земле GPIO0. Ее можно использовать как обычную кнопку. Если программно подтянуть вывод GPIO0 с помощью внутреннего подтягивающего резистора к высокому уровню, то появление низкого уровня на этом выводе будет означать, что кнопка нажата.
- Интерфейс I2C — последовательная асимметричная шина. I2C используется для подключения датчиков и периферийных устройств. NodeMCU ESP8266 не имеет аппаратных выводов I2C, но интерфейс можно реализовать программно. Поддерживаются как I2C Master, так и I2C Slave. Обычно в качестве контактов I2C используются следующие выводы.
    - GPIO5: SCL
    - GPIO4: SDA
- PWM (pulse-width modulation) — широтно-импульсная модуляция (ШИМ) управляет мощностью методом пульсирующего включения и выключения вывода. NodeMCU поддерживает программный ШИМ на выводах, обозначенных на рисунке изгибающейся линией.
	- D1-D4
	- D5-D8
---
---
# NodeMCU
**[https://wikihandbk.com/wiki/ESP8266:Модули/Сравнение_прототипных_плат_ESP8266_NodeMCU](https://wikihandbk.com/wiki/ESP8266:%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D0%B8/%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D1%82%D0%B8%D0%BF%D0%BD%D1%8B%D1%85_%D0%BF%D0%BB%D0%B0%D1%82_ESP8266_NodeMCU "https://wikihandbk.com/wiki/ESP8266:%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D0%B8/%D0%A1%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BF%D1%80%D0%BE%D1%82%D0%BE%D1%82%D0%B8%D0%BF%D0%BD%D1%8B%D1%85_%D0%BF%D0%BB%D0%B0%D1%82_ESP8266_NodeMCU")**

- ### **NodeMCU V2 (2-ое поколение / V1.0 / V2)**
    - **Чип ESP-12E**
    - **[https://github.com/nodemcu/nodemcu-devkit-v1.0](https://github.com/nodemcu/nodemcu-devkit-v1.0 "https://github.com/nodemcu/nodemcu-devkit-v1.0")****![b0931bf4ab82191fdb5bd73ef914f412.png](file:///C:/Users/trsteep/.config/joplin-desktop/resources/a4ca397f9e224fbfbeac947707c5d626.png)**
- ### **NodeMCU V3**
    - **3-е поколение еще не вышло, эта версия придуманная компанией LoLin, с доп USB**
    - **![108ccea4ee8f1790c67822fe487799b4.png](file:///C:/Users/trsteep/.config/joplin-desktop/resources/341704c6b3a84d38b896415164905c50.png)**
- Обратите внимание на различия в размерах, плата **LoLin** (NodeMCU V3) значительно больше плат Amica и DOIT V2.
    - **![35a7d34f5019588e286a77181f6b2c44.png](file:///C:/Users/trsteep/.config/joplin-desktop/resources/9fbe18c69a574697b52ea34f7690fce9.png)![5159e541db3fe94d7884fdd597627b96.png](file:///C:/Users/trsteep/.config/joplin-desktop/resources/4777b57b761742f4928a22ee6018a8a5.png)**

---
---
# ESP8266 mini
У самого чипа esp8266 все выводы пронумерованы цифрами. На распиновке они подписаны как GPIOn, где n – номер. На плате (NodeMCU, Wemos Mini) пины подписаны как Dn и эти номера не совпадают с номерами GPIO! При работе например с Wemos можно использовать как нумерацию выводов GPIO (digitalWrite(5, LOW)), так и D-нумерацию пинов на плате (digitalWrite(D1, LOW)) – если выбрана плата Wemos. Новички очень часто в этом путаются, будьте внимательны. Также GPIO1 и GPIO3 подписаны на плате как TX и RX, по этим названиям к ним тоже можно обращаться (digitalWrite(TX, LOW)).

**![55cedb7fbb5774b474bdd60f557938fd.png](file:///C:/Users/trsteep/.config/joplin-desktop/resources/c4280d68c31a4cf889c9fc5c2581662b.png)**

---
### У esp8266 много системных пинов, с которыми нужно быть очень внимательным.
- К целому ряду пинов подключена внешняя Flash память, в общем случае их использовать нельзя (если очень нужно – ищите информацию). На плате NodeMCU визуально гораздо больше пинов, чем на Wemos Mini, но по факту “безопасных” для использования пинов там ровно столько же.
- С оставшимися пинами тоже не всё гладко: некоторые из них требуют наличия определенного логического уровня на момент включения микроконтроллера (подача питания, перезагрузка), иначе esp не запустится. Вот распиновка с этими пинами и нужным уровнем сигнала при запуске:
- ![3ed37d56297ba9bb3295a25fb2ed8a6c.png](file:///C:/Users/trsteep/.config/joplin-desktop/resources/261b54ce606e4b8cb104891376a78606.png)
- На плате (NodeMCU, Wemos и других) эти пины уже подтянуты резисторами к нужному напряжению, поэтому нужно несколько раз подумать, что вы к ним подключаете и как оно повлияет на напряжение на пине. Например, можно подключить энкодер, он прижмёт системный пин к GND и esp не запустится.
- На GPIO16/D0 нельзя подключать прерывания (attachInterrupt()) и включать ШИМ сигнал (analogWrite()).
- Максимальный ток с GPIO – 12 мА.
- Светодиод LED_BUILTIN находится на пине GPIO2 и его поведение инвертировано: при подаче LOW он включается и наоборот.
- При старте контроллера почти все пины делают скачок до высокого уровня, подробнее – в этой статье. Единственными “спокойными” пинами являются D1 (GPIO5) и D2 (GPIO4). Если контроллер управляет напрямую какими-то железками (реле, транзистор, или является “кнопкой” для другого устройства), то лучше использовать именно эти пины!
    - На этих же пинах сидит I2C, но шину можно переназначить на любые другие пины через Wire.begin(sda, scl)

---
